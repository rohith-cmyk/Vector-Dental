# Backend Environment - copy to .env and fill in values
# Required for: local dev, Docker, production

# ============ Server ============
NODE_ENV=development
PORT=4000
LOG_LEVEL=debug

# ============ Database (Required) ============
# PostgreSQL connection string (Supabase, Neon, RDS, or local)
DATABASE_URL=postgresql://user:password@host:5432/database?schema=public
# Direct connection for migrations (if using connection pooling)
DIRECT_URL=postgresql://user:password@host:5432/database?schema=public

# ============ JWT (Required for production) ============
# Generate a strong secret: openssl rand -base64 32
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRES_IN=7d

# ============ Supabase (Required) ============
# From Supabase Dashboard > Project Settings > API
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ============ CORS (Required for production) ============
# Comma-separated list of allowed origins (no trailing slashes)
# Local: http://localhost:3000,http://localhost:3001
# Production: https://app.yourdomain.com,https://gd.yourdomain.com
CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# ============ Rate Limiting (production only) ============
RATE_LIMIT_GENERAL_MAX=100
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_PUBLIC_MAX=30

# ============ File Upload ============
MAX_FILE_SIZE=10485760
UPLOAD_DIR=uploads
# Supabase Storage bucket (default: referral-files). Created automatically on first run.
SUPABASE_STORAGE_BUCKET=referral-files
# Set to "true" to use Supabase Storage in development (default: local uploads/)
USE_SUPABASE_STORAGE=false

# ============ Email - SMTP ============
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=
SMTP_PASS=
EMAIL_FROM=noreply@dentalreferral.com

# ============ Email - Resend (alternative to SMTP) ============
RESEND_API_KEY=

# ============ SMS - Twilio ============
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_MESSAGING_SERVICE_SID=
TWILIO_PHONE_NUMBER=
